<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø±ÙŠÙ…ÙˆØª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ âš™ï¸</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; padding: 20px; text-align: center; }
        .admin-card { background: #222; border: 2px solid #ff9f43; border-radius: 20px; padding: 20px; max-width: 500px; margin: auto; }
        input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #444; background: #333; color: white; }
        button { width: 95%; padding: 12px; margin: 5px 0; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .btn-orange { background: #ff9f43; color: black; }
        .btn-red { background: #e74c3c; color: white; margin-top: 20px; }
        .comm-box { background: #333; padding: 10px; margin: 10px 0; border-radius: 10px; text-align: right; border-right: 4px solid #ff9f43; }
    </style>
</head>
<body>

    <div class="admin-card">
        <h2 style="color:#ff9f43">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„Ø© âš™ï¸</h2>
        
        <button class="btn-red" onclick="resetAll()">ğŸ”¥ ØªØµÙÙŠØ± Ø´Ø§Ù…Ù„ (Ù…Ø³Ø­ ÙƒÙ„ Ø´ÙŠØ¡)</button>
        <hr style="border-color:#444; margin:20px 0;">

        <input type="text" id="imgInp" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù‡Ù†Ø§...">
        <button class="btn-orange" onclick="updateData('main_image', 'imgInp')">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© ğŸ–¼ï¸</button>
        
        <input type="text" id="vidInp" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨ Ù‡Ù†Ø§...">
        <button class="btn-orange" onclick="updateData('video_url', 'vidInp')">ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ğŸ¥</button>

        <hr style="border-color:#444; margin:20px 0;">

        <h3>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ ğŸ’¬</h3>
        <div id="adminChat">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://ourphotoshare-a874a-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function updateData(path, inputId) {
            const val = document.getElementById(inputId).value;
            db.ref(path).set(val).then(() => {
                alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­!");
                document.getElementById(inputId).value = "";
            });
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØµÙÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„
        function resetAll() {
            if(confirm("Ø³ÙŠØªÙ… Ø­Ø°Ù ÙƒÙ„ Ø§Ù„ØµÙˆØ±ØŒ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ ÙˆØ§Ù„Ù„Ø§ÙŠÙƒØ§Øª.. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
                db.ref('main_image').set("");
                db.ref('video_url').set("");
                db.ref('reactions').set({like: 0, dislike: 0});
                db.ref('comments').remove();
                alert("ØªÙ… ØªØµÙÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­! âœ¨");
            }
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù„Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§
        db.ref('comments').on('value', s => {
            const container = document.getElementById('adminChat');
            container.innerHTML = "";
            s.forEach(child => {
                const id = child.key;
                const c = child.val();
                container.innerHTML += `
                    <div class="comm-box">
                        <p>${c.text || c}</p>
                        <input type="text" id="rep-${id}" placeholder="Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ù‡Ù†Ø§..." style="width:70%">
                        <button onclick="sendReply('${id}')" style="width:20%; background:#3498db; color:white;">Ø±Ø¯</button>
                    </div>`;
            });
        });

        function sendReply(id) {
            const txt = document.getElementById('rep-'+id).value;
            if(txt) {
                db.ref('comments/'+id).update({ reply: txt });
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯!");
            }
        }
    </script>
</body>
</html>
