<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø±ÙŠÙ…ÙˆØª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ âš™ï¸</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #1a1a1a; color: white; text-align: center; font-family: sans-serif; padding: 15px; }
        .card { background: #222; padding: 20px; border-radius: 20px; border: 1px solid #ff9f43; max-width: 450px; margin: auto; }
        input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 8px; background: #333; color: white; border: 1px solid #444; }
        button { width: 100%; padding: 12px; background: #ff9f43; color: black; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .comm-admin { background: #333; margin-top: 10px; padding: 10px; border-radius: 10px; text-align: right; font-size: 13px; }
        .reply-btn { background: #3498db; color: white; padding: 5px; font-size: 11px; width: auto; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… âš™ï¸</h2>
        <input type="text" id="inp" placeholder="Ù†Ø´Ø± Ø¬Ø¯ÙŠØ¯...">
        <button onclick="send()">Ù†Ø´Ø± Ø§Ù„Ø¢Ù† ğŸš€</button>
        
        <hr style="border-color:#444; margin:20px 0;">
        
        <h3>Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯ ğŸ’¬</h3>
        <div id="adminCommList"></div>
        <button style="background:#e74c3c; color:white; margin-top:20px;" onclick="db.ref('comments').set(null)">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ ğŸ§¹</button>
    </div>

    <script>
        const conf = { databaseURL: "https://ourphotoshare-a874a-default-rtdb.firebaseio.com" };
        firebase.initializeApp(conf);
        const db = firebase.database();

        function send() {
            const v = document.getElementById('inp').value;
            if(v) db.ref('post').set({content: v, timestamp: Date.now()}).then(() => alert("ØªÙ…!"));
        }

        // Ø¬Ù„Ø¨ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§
        db.ref('comments').on('value', (s) => {
            const list = document.getElementById('adminCommList');
            list.innerHTML = "";
            s.forEach((child) => {
                const id = child.key;
                const c = child.val();
                list.innerHTML += `
                    <div class="comm-admin">
                        <b>Ù…Ø´Ù…Ø´:</b> ${c.text} <br>
                        <input type="text" id="rep-${id}" placeholder="Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ù‡Ù†Ø§..." style="width:70%; font-size:12px;">
                        <button class="reply-btn" onclick="reply('${id}')">Ø±Ø¯</button>
                    </div>`;
            });
        });

        function reply(id) {
            const r = document.getElementById('rep-'+id).value;
            if(r) db.ref('comments/'+id+'/reply').set(r).then(() => alert("ØªÙ… Ø§Ù„Ø±Ø¯!"));
        }
    </script>
</body>
</html>
